{"version":3,"sources":["../src/app.controller.ts"],"sourcesContent":["import { Controller, Get } from '@nestjs/common';\nimport { ApiTags, ApiOperation, ApiResponse } from '@nestjs/swagger';\nimport { PrismaService } from './prisma/prisma.service';\n\ninterface HealthCheckResponse {\n  status: 'ok' | 'error';\n  timestamp: string;\n  database: 'connected' | 'disconnected';\n  error?: string;\n}\n\n@ApiTags('App')\n@Controller()\nexport class AppController {\n  constructor(private readonly prisma: PrismaService) {}\n\n  @Get()\n  @ApiOperation({ summary: 'Get API status' })\n  getStatus() {\n    return {\n      status: 'ok',\n      timestamp: new Date().toISOString(),\n      message: 'Servicio API is running',\n    };\n  }\n\n  @Get('health')\n  @ApiOperation({ summary: 'Health check endpoint' })\n  @ApiResponse({ status: 200, description: 'Health check response' })\n  async healthCheck(): Promise<HealthCheckResponse> {\n    try {\n      // Test database connection\n      await this.prisma.$queryRaw`SELECT 1`;\n      return {\n        status: 'ok',\n        timestamp: new Date().toISOString(),\n        database: 'connected',\n      };\n    } catch (error: unknown) {\n      const err = error as Error;\n      return {\n        status: 'error',\n        timestamp: new Date().toISOString(),\n        database: 'disconnected',\n        error: err.message,\n      };\n    }\n  }\n}\n"],"names":["AppController","getStatus","status","timestamp","Date","toISOString","message","healthCheck","prisma","$queryRaw","database","error","err","constructor","summary","description"],"mappings":";;;;+BAaaA;;;eAAAA;;;wBAbmB;yBACmB;+BACrB;;;;;;;;;;AAWvB,IAAA,AAAMA,gBAAN,MAAMA;IAKXC,YAAY;QACV,OAAO;YACLC,QAAQ;YACRC,WAAW,IAAIC,OAAOC,WAAW;YACjCC,SAAS;QACX;IACF;IAEA,MAGMC,cAA4C;QAChD,IAAI;YACF,2BAA2B;YAC3B,MAAM,IAAI,CAACC,MAAM,CAACC,SAAS,CAAC,QAAQ,CAAC;YACrC,OAAO;gBACLP,QAAQ;gBACRC,WAAW,IAAIC,OAAOC,WAAW;gBACjCK,UAAU;YACZ;QACF,EAAE,OAAOC,OAAgB;YACvB,MAAMC,MAAMD;YACZ,OAAO;gBACLT,QAAQ;gBACRC,WAAW,IAAIC,OAAOC,WAAW;gBACjCK,UAAU;gBACVC,OAAOC,IAAIN,OAAO;YACpB;QACF;IACF;IAjCAO,YAAY,AAAiBL,MAAqB,CAAE;aAAvBA,SAAAA;IAAwB;AAkCvD;;;;QA/BkBM,SAAS;;;;;;;;;QAUTA,SAAS;;;QACVZ,QAAQ;QAAKa,aAAa"}