{"version":3,"sources":["../../../src/auth/strategies/google.strategy.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\nimport { ConfigService } from '@nestjs/config';\nimport { PassportStrategy } from '@nestjs/passport';\nimport { Strategy } from 'passport-google-oauth20';\n\n@Injectable()\nexport class GoogleStrategy extends PassportStrategy(Strategy, 'google') {\n  constructor(private configService: ConfigService) {\n    const clientID = configService.get('GOOGLE_CLIENT_ID') || 'dummy-id';\n    const clientSecret = configService.get('GOOGLE_CLIENT_SECRET') || 'dummy-secret';\n    const callbackURL = configService.get('GOOGLE_CALLBACK_URL') || 'http://localhost:3001/auth/google/callback';\n    \n    super({\n      clientID,\n      clientSecret,\n      callbackURL,\n      scope: ['email', 'profile']\n    });\n  }\n\n  async validate(accessToken: string, refreshToken: string, profile: any) {\n    const { name, emails, photos } = profile;\n    \n    return {\n      email: emails[0].value,\n      firstName: name.givenName,\n      lastName: name.familyName,\n      picture: photos[0].value,\n      accessToken\n    };\n  }\n} "],"names":["GoogleStrategy","PassportStrategy","Strategy","validate","accessToken","refreshToken","profile","name","emails","photos","email","value","firstName","givenName","lastName","familyName","picture","constructor","configService","clientID","get","clientSecret","callbackURL","scope"],"mappings":";;;;+BAMaA;;;eAAAA;;;wBANc;wBACG;0BACG;uCACR;;;;;;;;;;AAGlB,IAAA,AAAMA,iBAAN,MAAMA,uBAAuBC,IAAAA,0BAAgB,EAACC,+BAAQ,EAAE;IAc7D,MAAMC,SAASC,WAAmB,EAAEC,YAAoB,EAAEC,OAAY,EAAE;QACtE,MAAM,EAAEC,IAAI,EAAEC,MAAM,EAAEC,MAAM,EAAE,GAAGH;QAEjC,OAAO;YACLI,OAAOF,MAAM,CAAC,EAAE,CAACG,KAAK;YACtBC,WAAWL,KAAKM,SAAS;YACzBC,UAAUP,KAAKQ,UAAU;YACzBC,SAASP,MAAM,CAAC,EAAE,CAACE,KAAK;YACxBP;QACF;IACF;IAvBAa,YAAY,AAAQC,aAA4B,CAAE;QAChD,MAAMC,WAAWD,cAAcE,GAAG,CAAC,uBAAuB;QAC1D,MAAMC,eAAeH,cAAcE,GAAG,CAAC,2BAA2B;QAClE,MAAME,cAAcJ,cAAcE,GAAG,CAAC,0BAA0B;QAEhE,KAAK,CAAC;YACJD;YACAE;YACAC;YACAC,OAAO;gBAAC;gBAAS;aAAU;QAC7B,SAVkBL,gBAAAA;IAWpB;AAaF"}